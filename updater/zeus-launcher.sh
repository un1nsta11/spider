#!/usr/bin/env sh
# ----------------------------------------------------------------------------------------------------------------------
# Title: Zeus Updater
# ----------------------------------------------------------------------------------------------------------------------

# ----------------------------------------------------------------------------------------------------------------------
# Helper Functions
# ----------------------------------------------------------------------------------------------------------------------
log_info() {
  echo $(date) "[INFO ] $1"
}
log_error() {
  echo $(date) "[ERROR] $1"
}
log_warn() {
  echo $(date) "[WARN ] $1"
}

# ----------------------------------------------------------------------------------------------------------------------
# Variables
# ----------------------------------------------------------------------------------------------------------------------
installer_path="/zeus"
updater_path="/zeus/updater"
local_repository="/zeus/zeus"

# ----------------------------------------------------------------------------------------------------------------------
# Main Functions
# ----------------------------------------------------------------------------------------------------------------------
log_info "Update repository before running...."
cd $local_repository && git pull && cd ..
log_info "Run Zeus"
cd $local_repository && python3 zeus.py &
log_info "Zeus has been started"
log_info "Launcher worker completed with error level $?. Exiting..."
exit 0